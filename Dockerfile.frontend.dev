FROM node:20-alpine

WORKDIR /app/frontend

COPY frontend/package*.json ./
RUN npm ci --no-audit --no-fund

COPY frontend/ ./

# Define variáveis de ambiente padrão para desenvolvimento em container
ENV VITE_API_BASE_URL=http://backend:8010/api/v1 \
    VITE_REALTIME_POLL_INTERVAL_SEC=15

EXPOSE 5002

# Executa Vite em modo dev e expõe na rede
CMD ["npm", "run", "dev", "--", "--host", "--port", "5002"]